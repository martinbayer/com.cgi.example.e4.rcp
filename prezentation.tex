\documentclass{beamer}
\usepackage[utf8]{inputenc}
\usepackage{bbding}

\usetheme{cgi}

\title{Modularity with Eclipse RCP}
\author{Martin Bayer \& Tom\'{a}\v{s} Vejpustek}

\newcommand{\eg}{\textcolor{pumpkin}{\raisebox{-0.5mm}{\HandRight}}}
\newcommand{\fig}{\textcolor{pumpkin}{\raisebox{-0.5mm}{\PencilRightDown}}}
\newcommand{\str}[1]{\structure{#1}}

\newcommand{\breakframe}{\begin{fillerframe}\frametitle{Break: Questions?}\end{fillerframe}}
\newenvironment{centerblock}{\begin{block}{}\begin{center}}{\end{center}\end{block}}
\newcommand{\ttt}[1]{\texttt{#1}}
\newcommand{\mtt}[1]{\ensuremath{\mathtt{#1}}}

\begin{document}

\titlepageframe
\begin{frame}{Outline}%{{{
	Basic understanding of RCP:
	\begin{enumerate}
		\item What is Eclipse RCP?
		\item Dependency injection, inversion of control
		\item Application architecture
		\item Communication
		\item Modularity with plugins
	\end{enumerate}
\end{frame}%}}}
\begin{frame}{Eclipse Rich Client Platform}%{{{
	\begin{itemize}
		\item \alert{not} plugins for Eclipse IDE
		\item software framework
		\item thick clients with GUI
		\item layout looks like Eclipse IDE \eg
	\end{itemize}
	%TODO example picture or notice
\end{frame}%}}}
\begin{frame}{Why RCP}
	% TODO nad tímhle chce ještě zapracovat
\end{frame}
\begin{frame}{Dependency Injection}%{{{
	means of accessing software libraries \fig
	\begin{enumerate}
		\item I~need \str{service}
		\item I~ask \str{framework} for \str{interface}
		\item \str{framework} finds (and initializes) \str{implementation}
	\end{enumerate}

	\str{implementations} are interchangeable
\end{frame}%}}}
\begin{frame}{Dependency Injection in RCP}%{{{
	\begin{itemize}
		\item based on \str{OSGi}
		\item annotations \eg
			\begin{itemize}
				\item fields, constructors -- \ttt{@Inject}
				\item methods -- behavioral (\ttt{@PostConstruct}, \ldots)
			\end{itemize}
	\end{itemize}

	\begin{block}{Context}
		\begin{itemize}
			\item[=] storage for injectable objects
			\item[=] mechanism of searching injectable objects
		\end{itemize}
		\begin{center}``Let's put this object into context''\end{center}
	\end{block}
\end{frame}%}}}
\begin{frame}{Pros and Cons of Dependency Injection}%{{{
	\begin{itemize}
		\item[+] \str{independence on concrete implementation}
		\item[+] increased modularity
		\item[+] easy testing
		\item[+] independent development (only need API)
		\item[+] reduces boilerplate dependency obtaining
		\item[$-$] difficult to trace and debug (\alert{document well!})
	\end{itemize}
\end{frame}%}}}
\begin{frame}{Inversion of Control}%{{{
	\begin{centerblock}``Don't call us, we'll call you.''\end{centerblock}
	\begin{itemize}
		\item $\approx$ software framework
		\item DI is one implementation
		\item user writes \str{snippets} and \str{framework calls} them
		\item user writes \str{GUI elements} and \str{framework places} them
		\item when/where $\Leftarrow$ configuration (XML files)
	\end{itemize}
\end{frame}%}}}
\begin{frame}{Application Model}
	% can be changed dynamically (ModelService) \eg
\end{frame}
\begin{frame}{Commands and Handlers}%{{{
	\begin{description}
		\item[Command] abstract action (save, \ldots)
		\item[Handler] actual implementation
	\end{description}

	\bigskip

	\begin{itemize}
		\item DI in practice \fig \eg
			\begin{enumerate}
				\item button calls \str{command}
				\item \str{framework} finds closest \str{handler}
			\end{enumerate}
		\item different ``save'' for different editors
		\item handlers can be called from code \eg
	\end{itemize}
\end{frame}%}}}

\breakframe

\begin{frame}{Communication}%{{{
	\begin{centerblock}How to pass information/objects between modules/plugins?\end{centerblock}

	\medskip

	Communication in RCP:
	\begin{itemize}
		\item DI-based
		\item[$-$] weird, hard-to-trace errors (missing producer)
		\item[$+$] great decoupling
	\end{itemize}
\end{frame}%}}}
\begin{frame}{Eclipse Context}%{{{
	\begin{itemize}
		\item basis of DI in RCP
		\item storage of objects
	\end{itemize}
	\begin{centerblock}\begin{tabular}{rl}
		used as & $\mtt{Class\langle T\rangle}\to\mtt{T}$\\
		implemented as & $\mtt{String} \to \mtt{Object}$ (\ttt{@Named})\\
	\end{tabular}\end{centerblock}
	Passing objects \eg
	\begin{itemize}
		\item send using \ttt{IEclipseContext} (from DI)
		\item receive via DI
	\end{itemize}
\end{frame}%}}}
\begin{frame}{Context Hierarchy}

\end{frame}
\begin{frame}{Event Service}


	Passing objects \eg
	\begin{itemize}
		\item send using \ttt{IEventBroker} (from DI): \ttt{send}, \ttt{post}
		\item receive via DI: \ttt{@EventTopic}, \ttt{@UIEventTopic}
	\end{itemize}
\end{frame}
\begin{frame}{Context \hfill vs \hfill Event Service}
\end{frame}
\begin{frame}{Selection Service}
\end{frame}

\breakframe

\end{document}
